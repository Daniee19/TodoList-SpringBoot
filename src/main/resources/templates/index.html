<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>To-Do LIST</title>
    <link rel="stylesheet" th:href="@{/style.css}"/>
</head>
<body>
<h1>To-Do LIST</h1>
<div id="app">
    <div>
        <h3>Agregar tarea</h3>

        <form method="get" action="tareas/registroCrearTarea">
            <button type="submit">Agregar tarea</button>
        </form>
        <form class="eliminarTarea" method="get">
            <button type="submit" id="btnEliminarTarea">Eliminar tarea</button>
        </form>
    </div>
    <div class="tablita">
        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>Titulo</th>
                <th>Descripción</th>
                <th>Fecha de Creación</th>
                <th>Actualizar Tarea</th>
                <th>¿Terminado?</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${tareaEspeficica}">
                <td th:text="${tarea.idTarea}"></td>
                <th th:text="${tarea.titulo}"></th>
                <th th:text="${tarea.descripcion}"></th>
                <th th:text="${tarea.fechaCreacion}"></th>
                <th>
                    <form method="get" th:action="@{/tareas/registroActualizarTarea/{id}(id=${tarea.idTarea})}">
                        <button type="submit">Editar</button>
                    </form>
                </th>
                <th><input type="checkbox"></th>
            </tr>
            <!-- Si la lista está vacía, muestra un mensaje. Se hizo de esta manera porque cuando es asincrónico el
            cliente verá el cambio sin tener que actualizar el navegador -->
            <tr th:classappend="${tareas == null or tareas.isEmpty()} ? '' : 'hidden'" th:class="mensaje_no_tareas">
                <td colspan="6">No hay tareas registradas.</td>
            </tr>
            <tr th:each="tarea : ${tareas}">
                <td th:text="${tarea.idTarea}"></td>
                <th th:text="${tarea.titulo}"></th>
                <th th:text="${tarea.descripcion}"></th>
                <th th:text="${tarea.fechaCreacion}"></th>
                <th>
                    <form method="get" th:action="@{/tareas/registroActualizarTarea/{id}(id=${tarea.idTarea})}">
                        <button type="submit">Editar</button>
                    </form>
                </th>
                <th><input type="checkbox" class="cb" th:data-target="${tarea.idTarea}" th:value="${tarea.idTarea}">
                </th>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script th:src="@{/js.js}"></script>
</body>
</html>